language: node_js
node_js: 8

script:
  - if [ "$TRAVIS_BRANCH" = "master" ]; then npm run build:next; fi
  - if [ "$TRAVIS_BRANCH" = "prod" ]; then npm run build; fi

before_deploy:
  - cd dist

deploy:
  - provider: npm
    tag: latest
    all_branches: true
    skip_cleanup: true
    email: $NPM_EMAIL
    api_key: $NPM_TOKEN
  - provider: npm
    tag: next
    all_branches: true
    skip_cleanup: true
    email: $NPM_EMAIL
    api_key: $NPM_TOKEN
